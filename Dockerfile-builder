# Start from the latest golang base
FROM golang:alpine

RUN apk add --update musl-dev gcc make bash git openssh

# Most of these same statements are in install_environment.sh
# But we don't ADD that file then execute it because that would
# invalidate the docker cache and cause very long build time

# Required for building and testing
RUN go get -u github.com/golang/mock/mockgen                        # Mock generator
RUN go get -u github.com/onsi/ginkgo/ginkgo                         # ginkgo BDD framework
RUN go get -u github.com/modocache/gover                            # Code coverage aggregation
RUN go get -u github.com/mattn/goveralls                            # coveralls.io online code coverage viewer
RUN go get -u github.com/kardianos/govendor
RUN go get -u github.com/go-openapi/runtime
RUN go get -u github.com/go-swagger/go-swagger/cmd/swagger

# Required for code standards reporting (Analysis reporting only, no automatic source changes)
RUN go get -u github.com/fzipp/gocyclo                              # Calculates cyclomatic complexities
RUN go get -u github.com/gordonklaus/ineffassign                    # Detects ineffectual assignments
RUN go get -u github.com/golang/lint/golint                         # Code linter
RUN go get -u github.com/client9/misspell/cmd/misspell              # Detects common mispellings


# Set the WORKDIR to the project path in your GOPATH, e.g. /go/src/github.com/Polarishq/SERVICE_NAME/
WORKDIR /go/src/github.com/declanshanaghy/bbqberry

# Copy the content of the repository into the container
COPY . ./
